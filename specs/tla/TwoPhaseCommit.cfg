\* TLC configuration for TwoPhaseCommit.tla
\*
\* Model checking parameters for 2 transactions and 3 participants.
\* Includes fault model (DropMessage, ParticipantRestart).
\* Run with: java -XX:+UseParallelGC -Xmx4g -jar tla2tools.jar \
\*   -deadlock -workers auto -config TwoPhaseCommit.cfg TwoPhaseCommit.tla

\* ========================================================================
\* Constants
\* ========================================================================

CONSTANTS
    tx1 = tx1
    tx2 = tx2
    p1 = p1
    p2 = p2
    p3 = p3
    Nil = Nil
    Transactions = {tx1, tx2}
    Participants = {p1, p2, p3}
    MessageBound = 6

\* ========================================================================
\* Specification
\* ========================================================================

SPECIFICATION Spec

\* ========================================================================
\* State Space Constraint
\* ========================================================================

CONSTRAINT StateConstraint

\* ========================================================================
\* Invariants (Safety Properties)
\* ========================================================================

INVARIANT TypeOK
INVARIANT Atomicity
INVARIANT NoOrphanedLocks
INVARIANT ConsistentDecision

\* ========================================================================
\* Properties (Temporal)
\* ========================================================================

PROPERTY DecisionStability
PROPERTY VoteIrrevocability
